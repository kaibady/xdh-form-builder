(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41186f46"],{"1e4b":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list-wrapper"},[i("xdh-list",{attrs:{data:t.data,layout:"horizontal",column:6,gutter:20,split:!1,justify:"space-between"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item,r=e.index;return i("el-card",{staticClass:"box-card",class:{add:n.isAdd},attrs:{shadow:"hover","body-style":{padding:0}},nativeOn:{click:function(e){return e.stopPropagation(),t.handleClick(n)}}},[n.isAdd?i("i",{staticClass:"el-icon-plus"}):t._e(),t._v("\n      "+t._s(n.title)+"\n      "),n.isAdd?t._e():i("div",{staticClass:"action"},[i("i",{staticClass:"el-icon-edit",on:{click:function(e){return e.stopPropagation(),t.handleEdit(n)}}}),i("i",{staticClass:"el-icon-delete",on:{click:function(e){return e.stopPropagation(),t.handleRemove(n,r)}}})])])}}])}),i("el-dialog",{attrs:{title:"新建/编辑表单",visible:t.dialogVisible,width:"500px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("xdh-form",{ref:"form",staticClass:"form",attrs:{"footer-align":"right","label-width":"60px","footer-border":!1,model:t.editItem},on:{submit:t.handleSubmit}},[i("xdh-form-item",{attrs:{prop:"title",label:"名称",rules:{required:!0}}})],1)],1)],1)},r=[],s=i("75fc"),o=(i("7f7f"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",{class:t.classes,attrs:{type:t.type,gutter:t.gutter,justify:t.justify}},t._l(t.data,function(e,n){return i("el-col",{key:n,staticClass:"xdh-list__item",attrs:{span:t.span}},[t._t("default",null,{item:e,index:n})],2)}),1)}),a=[],l=(i("28a5"),i("c5f6"),i("6762"),i("2fdb"),{name:"XdhList",props:{data:{type:Array,required:!0},bordered:{type:Boolean,default:!1},layout:{type:String,validator:function(t){return["vertical","horizontal"].includes(t)},default:"vertical"},size:{type:String,validator:function(t){return["mini","small","medium"].includes(t)},default:"medium"},split:{type:Boolean,default:!0},gutter:{type:Number,default:0},column:{type:Number,default:1},justify:{type:String,validator:function(t){return["start","end","center","space-around","space-between"].includes(t)},default:"start"},type:{type:String,default:null}},computed:{span:function(){return"vertical"===this.layout?24:24/this.column},classes:function(){return["xdh-list--"+this.layout,"xdh-list--"+this.size,{"xdh-list--bordered":this.bordered,"xdh-list--split":this.split}]}}}),u=l,d=i("2877"),c=Object(d["a"])(u,o,a,!1,null,null,null),f=c.exports;f.install=function(t){t.component(f.name,f)};var m=f,h=i("d78a"),b=i("dd0b"),p=i("4fbb"),v=i("db49"),g=i("b5e2"),j={mixins:[p["a"]],components:{XdhList:m,XdhForm:h["c"],XdhFormItem:b["a"]},data:function(){return{dialogVisible:!1,editItem:null}},computed:{data:function(){return[{id:0,isAdd:!0}].concat(Object(s["a"])(this.forms.list))}},methods:{refresh:function(){v["d"]?this.forms.list=Object(g["b"])():this.fetchForms()},handleEdit:function(t){this.editItem=t,this.dialogVisible=!0},handleRemove:function(t,e){var i=this;this.$confirm("确认删除？","提示").then(function(n){v["d"]?(Object(g["d"])(t._id),i.refresh()):i.removeForms(t._id,null,e-1)})},handleClick:function(t){t.isAdd?this.dialogVisible=!0:this.$router.push("/marker/".concat(t._id))},handleSubmit:function(t){var e=this;this.editItem?v["d"]?(Object(g["e"])(t._id,t),this.editItem=null,this.$refs.form.reset(),this.dialogVisible=!1,this.refresh()):this.updateForms(t).then(function(t){e.editItem=null,e.$refs.form.reset(),e.dialogVisible=!1,e.refresh()}):v["d"]?(Object(g["a"])(t),this.$refs.form.reset(),this.dialogVisible=!1,this.refresh()):this.addForms(t).then(function(t){e.$refs.form.reset(),e.dialogVisible=!1,e.refresh()})}},created:function(){this.refresh()}},y=j,_=(i("2c0c"),Object(d["a"])(y,n,r,!1,null,"d406ba58",null));e["default"]=_.exports},"2c0c":function(t,e,i){"use strict";var n=i("b7d3"),r=i.n(n);r.a},"4fbb":function(t,e,i){"use strict";i("6762"),i("2fdb"),i("c5f6"),i("04ff");var n=i("db49"),r=i("ab3e"),s=n["b"]+"/forms";function o(t){return Object(r["a"])({method:"get",data:t,url:s})}var a=n["b"]+"/forms/:id";function l(t,e){return Object(r["a"])({method:"get",params:{id:t},data:e,url:a})}var u=n["b"]+"/forms";function d(t){return Object(r["a"])({method:"post",data:t,url:u})}var c=n["b"]+"/forms";function f(t){return Object(r["a"])({method:"patch",data:t,url:c})}var m=n["b"]+"/forms/:id";function h(t,e){return Object(r["a"])({method:"delete",params:{id:t},data:e,url:m})}var b=n["b"]+"/forms/remove";function p(t){return Object(r["a"])({method:"post",data:t,url:b})}e["a"]={data:function(){return{forms:{list:[],page:null,limit:null,total:0,model:null}}},methods:{fetchForms:function(t){var e=this;return o(t).then(function(t){return e.forms.list=t.list||[],e.forms.page=Number.parseInt(t.page)||0,e.forms.limit=Number.parseInt(t.limit)||0,e.forms.total=Number.parseInt(t.total)||0,t})},getForms:function(t,e){var i=this;return l(t,e).then(function(t){return i.forms.model=Object.assign({},e,t||{}),t})},addForms:function(t,e){var i=this;return d(t,e).then(function(n){return i.forms.model=Object.assign({},t,n||{}),void 0!==e?i.forms.list.splice(e,0,i.forms.model):i.forms.list.push(i.forms.model),i.forms.total+=1,n})},updateForms:function(t,e){var i=this;return f(t,e).then(function(n){return i.forms.model=Object.assign({},t,n||{}),void 0!==e&&i.forms.list.splice(e,1,i.forms.model),n})},removeForms:function(t,e,i){var n=this;return h(t,e).then(function(t){return void 0!==i&&n.forms.list.splice(i,1),n.forms.total-=1,t})},batchForms:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return p(t).then(function(t){return i.length>0&&(e.forms.list=e.forms.list.filter(function(t,e){return!i.includes(e)})),e.forms.total-=i.length,t})}}}},b5e2:function(t,e,i){"use strict";i.d(e,"b",function(){return o}),i.d(e,"a",function(){return a}),i.d(e,"d",function(){return l}),i.d(e,"c",function(){return u}),i.d(e,"e",function(){return d});var n=i("cebc"),r=(i("20d6"),i("7514"),i("6b54"),i("5d2d")),s="__forms__";function o(){return Object(r["c"])(s,r["a"])||[]}function a(t){var e=o();t._id=(new Date).getTime().toString(),e.push(t),Object(r["d"])(s,e,r["a"])}function l(t){var e=o();e=e.filter(function(e){return e._id.toString()!==t.toString()}),Object(r["d"])(s,e,r["a"])}function u(t){var e=o();return e.find(function(e){return e._id.toString()===t.toString()})||{}}function d(t,e){var i=o(),a=i.findIndex(function(e){return e._id.toString()===t.toString()}),l=i[a]||{};i.splice(a,1,Object(n["a"])({},l,e)),Object(r["d"])(s,i,r["a"])}},b7d3:function(t,e,i){}}]);
//# sourceMappingURL=chunk-41186f46.2fdad4eb.js.map